<!--
  ~ /*
  ~ Copyright 2021 The Vitess Authors.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  ~ */
  -->

<!DOCTYPE html>
<html lang="en">

{{template "headHTML" .}}
<body>

<div style="min-height: 90vh;">

{{ template "navigation" "/analytics_mixed" }}

    <div class="container-xxl">
        <table class="table table-striped table-hover table-sm table-bordered">
            <thead>
            <tr>
                <th scope="col" class="text-center">Type</th>
                <th scope="col" class="text-center">QPS</th>
                <th scope="col" class="text-center">Reads</th>
                <th scope="col" class="text-center">Writes</th>
                <th scope="col" class="text-center">Other</th>
                <th scope="col" class="text-center">TPS</th>
                <th scope="col" class="text-center">Latency</th>
                <th scope="col" class="text-center">Errors</th>
                <th scope="col" class="text-center">CPU Total</th>
                <th scope="col" class="text-center">CPU Gate</th>
                <th scope="col" class="text-center">CPU Tablet</th>
                <th scope="col" class="text-center">Mem Total</th>
                <th scope="col" class="text-center">Mem Gate</th>
                <th scope="col" class="text-center">Mem Tablet</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>OLTP</td>
                <td>{{ formatFloat .variation_oltp.Result.QPS.Total }}</td>
                <td>{{ formatFloat .variation_oltp.Result.QPS.Reads }}</td>
                <td>{{ formatFloat .variation_oltp.Result.QPS.Writes }}</td>
                <td>{{ formatFloat .variation_oltp.Result.QPS.Other }}</td>
                <td>{{ formatFloat .variation_oltp.Result.TPS }}</td>
                <td>{{ formatFloat .variation_oltp.Result.Latency }}</td>
                <td>n/a</td>
                <td>{{ formatFloat .variation_oltp.Metrics.TotalComponentsCPUTime }}</td>
                <td>{{ formatFloat (index .variation_oltp.Metrics.ComponentsCPUTime "vtgate") }}</td>
                <td>{{ formatFloat (index .variation_oltp.Metrics.ComponentsCPUTime "vttablet") }}</td>
                <td>{{ formatBytes .variation_oltp.Metrics.TotalComponentsMemStatsAllocBytes }}</td>
                <td>{{ formatBytes (index .variation_oltp.Metrics.ComponentsMemStatsAllocBytes "vtgate") }}</td>
                <td>{{ formatBytes (index .variation_oltp.Metrics.ComponentsMemStatsAllocBytes "vttablet") }}</td>
            </tr>
            <tr>
                <td>OLTP</td>
                <td>{{ formatFloat .variation_oltp_percentage.Result.QPS.Total }}</td>
                <td>{{ formatFloat .variation_oltp_percentage.Result.QPS.Reads }}</td>
                <td>{{ formatFloat .variation_oltp_percentage.Result.QPS.Writes }}</td>
                <td>{{ formatFloat .variation_oltp_percentage.Result.QPS.Other }}</td>
                <td>{{ formatFloat .variation_oltp_percentage.Result.TPS }}</td>
                <td>{{ formatFloat .variation_oltp_percentage.Result.Latency }}</td>
                <td>n/a</td>
                <td>{{ formatFloat .variation_oltp_percentage.Metrics.TotalComponentsCPUTime }}</td>
                <td>{{ formatFloat (index .variation_oltp_percentage.Metrics.ComponentsCPUTime "vtgate") }}</td>
                <td>{{ formatFloat (index .variation_oltp_percentage.Metrics.ComponentsCPUTime "vttablet") }}</td>
                <td>{{ formatFloat .variation_oltp_percentage.Metrics.TotalComponentsMemStatsAllocBytes }}</td>
                <td>{{ formatFloat (index .variation_oltp_percentage.Metrics.ComponentsMemStatsAllocBytes "vtgate") }}</td>
                <td>{{ formatFloat (index .variation_oltp_percentage.Metrics.ComponentsMemStatsAllocBytes "vttablet") }}</td>
            </tr>
            <tr>
                <td>TPCC</td>
                <td>{{ formatFloat .variation_tpcc.Result.QPS.Total }}</td>
                <td>{{ formatFloat .variation_tpcc.Result.QPS.Reads }}</td>
                <td>{{ formatFloat .variation_tpcc.Result.QPS.Writes }}</td>
                <td>{{ formatFloat .variation_tpcc.Result.QPS.Other }}</td>
                <td>{{ formatFloat .variation_tpcc.Result.TPS }}</td>
                <td>{{ formatFloat .variation_tpcc.Result.Latency }}</td>
                <td>n/a</td>
                <td>{{ formatFloat .variation_tpcc.Metrics.TotalComponentsCPUTime }}</td>
                <td>{{ formatFloat (index .variation_tpcc.Metrics.ComponentsCPUTime "vtgate") }}</td>
                <td>{{ formatFloat (index .variation_tpcc.Metrics.ComponentsCPUTime "vttablet") }}</td>
                <td>{{ formatBytes .variation_tpcc.Metrics.TotalComponentsMemStatsAllocBytes }}</td>
                <td>{{ formatBytes (index .variation_tpcc.Metrics.ComponentsMemStatsAllocBytes "vtgate") }}</td>
                <td>{{ formatBytes (index .variation_tpcc.Metrics.ComponentsMemStatsAllocBytes "vttablet") }}</td>
            </tr>
            <tr>
                <td>TPCC</td>
                <td>{{ formatFloat .variation_tpcc_percentage.Result.QPS.Total }}</td>
                <td>{{ formatFloat .variation_tpcc_percentage.Result.QPS.Reads }}</td>
                <td>{{ formatFloat .variation_tpcc_percentage.Result.QPS.Writes }}</td>
                <td>{{ formatFloat .variation_tpcc_percentage.Result.QPS.Other }}</td>
                <td>{{ formatFloat .variation_tpcc_percentage.Result.TPS }}</td>
                <td>{{ formatFloat .variation_tpcc_percentage.Result.Latency }}</td>
                <td>n/a</td>
                <td>{{ formatFloat .variation_tpcc_percentage.Metrics.TotalComponentsCPUTime }}</td>
                <td>{{ formatFloat (index .variation_tpcc_percentage.Metrics.ComponentsCPUTime "vtgate") }}</td>
                <td>{{ formatFloat (index .variation_tpcc_percentage.Metrics.ComponentsCPUTime "vttablet") }}</td>
                <td>{{ formatFloat .variation_tpcc_percentage.Metrics.TotalComponentsMemStatsAllocBytes }}</td>
                <td>{{ formatFloat (index .variation_tpcc_percentage.Metrics.ComponentsMemStatsAllocBytes "vtgate") }}</td>
                <td>{{ formatFloat (index .variation_tpcc_percentage.Metrics.ComponentsMemStatsAllocBytes "vttablet") }}</td>
            </tr>
            </tbody>
        </table>
        <table class="table table-striped table-hover table-sm table-bordered">
            <thead>
            <tr>
                <th scope="col" class="text-center">Type</th>
                <th scope="col" class="text-center">UUID</th>
                <th scope="col" class="text-center">QPS</th>
                <th scope="col" class="text-center">Reads</th>
                <th scope="col" class="text-center">Writes</th>
                <th scope="col" class="text-center">Other</th>
                <th scope="col" class="text-center">TPS</th>
                <th scope="col" class="text-center">Latency</th>
                <th scope="col" class="text-center">Errors</th>
                <th scope="col" class="text-center">CPU Total</th>
                <th scope="col" class="text-center">CPU Gate</th>
                <th scope="col" class="text-center">CPU Tablet</th>
                <th scope="col" class="text-center">Mem Total</th>
                <th scope="col" class="text-center">Mem Gate</th>
                <th scope="col" class="text-center">Mem Tablet</th>
            </tr>
            </thead>
            <tbody>
            {{range $val := .data_oltp}}
            <tr>
                <td>OLTP</td>
                <td>{{ first8Letters ($val.ExecUUID) }}</td>
                <td>{{ $val.Result.QPS.Total }}</td>
                <td>{{ $val.Result.QPS.Reads }}</td>
                <td>{{ $val.Result.QPS.Writes }}</td>
                <td>{{ $val.Result.QPS.Other }}</td>
                <td>{{ $val.Result.TPS }}</td>
                <td>{{ $val.Result.Latency }}</td>
                <td>{{ $val.Result.Errors }}</td>
                <td>{{ formatFloat $val.Metrics.TotalComponentsCPUTime }}</td>
                <td>{{ formatFloat (index $val.Metrics.ComponentsCPUTime "vtgate") }}</td>
                <td>{{ formatFloat (index $val.Metrics.ComponentsCPUTime "vttablet") }}</td>
                <td>{{ formatBytes $val.Metrics.TotalComponentsMemStatsAllocBytes }}</td>
                <td>{{ formatBytes (index $val.Metrics.ComponentsMemStatsAllocBytes "vtgate") }}</td>
                <td>{{ formatBytes (index $val.Metrics.ComponentsMemStatsAllocBytes "vttablet") }}</td>
            </tr>
            {{end}}
            {{range $val := .data_tpcc}}
            <tr>
                <td>TPCC</td>
                <td>{{ first8Letters ($val.ExecUUID) }}</td>
                <td>{{ $val.Result.QPS.Total }}</td>
                <td>{{ $val.Result.QPS.Reads }}</td>
                <td>{{ $val.Result.QPS.Writes }}</td>
                <td>{{ $val.Result.QPS.Other }}</td>
                <td>{{ $val.Result.TPS }}</td>
                <td>{{ $val.Result.Latency }}</td>
                <td>{{ $val.Result.Errors }}</td>
                <td>{{ formatFloat $val.Metrics.TotalComponentsCPUTime }}</td>
                <td>{{ formatFloat (index $val.Metrics.ComponentsCPUTime "vtgate") }}</td>
                <td>{{ formatFloat (index $val.Metrics.ComponentsCPUTime "vttablet") }}</td>
                <td>{{ formatBytes $val.Metrics.TotalComponentsMemStatsAllocBytes }}</td>
                <td>{{ formatBytes (index $val.Metrics.ComponentsMemStatsAllocBytes "vtgate") }}</td>
                <td>{{ formatBytes (index $val.Metrics.ComponentsMemStatsAllocBytes "vttablet") }}</td>
            </tr>
            {{end}}
            </tbody>
        </table>
    </div>
</div>
</body>

</html>